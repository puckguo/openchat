# ============================================
# Open CoChat Environment Configuration
# ============================================
# Copy this file to .env and fill in your values

# ============================================
# Server Configuration
# ============================================
WS_PORT=3002
WS_HOST=0.0.0.0
NODE_ENV=production

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# Full connection string (recommended)
DATABASE_URL=postgresql://user:password@localhost:5432/opencode_chat

# Or individual settings
VITE_RDS_HOST=localhost
VITE_RDS_PORT=5432
VITE_RDS_DATABASE=opencode_chat
VITE_RDS_USER=opencode_user
VITE_RDS_PASSWORD=your_secure_password_here
ENABLE_DATABASE=true

# ============================================
# AI Service Configuration (DeepSeek)
# ============================================
# Get your API key from https://platform.deepseek.com/
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_MAX_TOKENS=2000
ENABLE_AI=true

# ============================================
# File Storage Configuration (Alibaba Cloud OSS)
# ============================================
# Optional: Leave empty to disable file storage
VITE_OSS_ACCESS_KEY_ID=
VITE_OSS_ACCESS_KEY_SECRET=
VITE_OSS_BUCKET=
VITE_OSS_REGION=oss-cn-beijing
ENABLE_OSS=false

# =============================================================================
# Voice Chat - 阿里云百炼实时语音识别
# 文档: https://help.aliyun.com/zh/model-studio/real-time-speech-recognition
# =============================================================================

# 阿里云 DashScope API Key (用于语音聊天功能)
DASHSCOPE_API_KEY=sk-your-dashscope-api-key

# WebSocket 端点 (可选，默认使用北京节点)
# DASHSCOPE_ENDPOINT=wss://dashscope.aliyuncs.com/api-ws/v1/realtime

# 语音识别模型 (可选)
# qwen3-asr-flash-realtime - 通义千问实时语音识别 (推荐)
# fun-asr-realtime - Fun-ASR 实时语音识别
DASHSCOPE_ASR_MODEL=qwen3-asr-flash-realtime

# 是否启用语音聊天功能
ENABLE_VOICE_CHAT=true

# =============================================================================
# Voice AI - 火山引擎豆包端到端实时语音大模型
# 文档: https://www.volcengine.com/docs/6561/1594356
# =============================================================================

# 火山引擎应用ID和访问密钥
VOLCANO_APP_ID=your-app-id
VOLCANO_ACCESS_TOKEN=your-access-token
VOLCANO_SECRET_KEY=your-secret-key

# 端点配置 (可选)
VOLCANO_ENDPOINT=wss://openspeech.bytedance.com/api/v3/realtime/dialogue
VOLCANO_API_APP_KEY=PlgvMymc7f3tQnJ6
VOLCANO_API_RESOURCE_ID=volc.speech.dialog

# 是否启用语音AI功能
ENABLE_VOICE_AI=true

# 多人语音聊天时，是否自动触发AI响应
# true - 当有人说完话后，AI自动回复所有人
# false - 需要手动点击按钮触发AI分析
ENABLE_AUTO_AI_RESPONSE=false

# =============================================================================
# Supabase Auth (可选)
# =============================================================================

# ============================================
# Authentication Configuration (Supabase)
# ============================================
# Optional: Leave empty to disable Supabase auth
SUPABASE_URL=
SUPABASE_PUBLISHABLE_KEY=
SUPABASE_SERVICE_ROLE_KEY=
ENABLE_SUPABASE_AUTH=false
ALLOW_ANONYMOUS=true

# ============================================
# Multiplayer Configuration
# ============================================
# Heartbeat interval (milliseconds)
HEARTBEAT_INTERVAL=30000

# Heartbeat timeout (milliseconds)
HEARTBEAT_TIMEOUT=60000

# Enable message compression
ENABLE_COMPRESSION=true

# Storage path (relative or absolute)
STORAGE_PATH=./data

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60000

# ============================================
# Logging
# ============================================
# Set to 'opencode-chat:*' for debug logging
DEBUG=
LOG_LEVEL=info
